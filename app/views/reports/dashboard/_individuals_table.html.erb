<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs/jq-2.2.3/dt-1.10.12/datatables.min.css"/>



<div class="panel panel-default" >
  <!-- Default panel contents -->
  <div class="panel-heading">
    <div class="panel-title">
      <button type="button" class="btn btn-xs btn-default" data-toggle="modal" data-target=".individuals-modal"><i class="fa fa-info-circle fa-1x"></i></button>
      &nbsp; Individual scores
    </div>
  </div>

  <div class="panel-content" style="padding:10px;">

    <!-- Table -->
    <table class="table"  id="employeestable">
      <thead>
        <th>Employee</th>
        <th>Last week</th>
        <th>Week before last</th>
        <th>Last 4 weeks</th>
      </thead>
      <tbody>
        <% per_agents.each do |id, values| %>
        <tr>
          <td><%= link_to values["employee"]["name"], individual_report_path(id) %></td>
          <% values["scores"].each do |v| %>
          <td><div class="label label-<%= v[1]["score_range"]%>"><%=v[1]["score"]%>%</div></td>
          <% end %>
        </tr>
        <% end %>
      </tbody>
    </table>
  </div>

</div>

<%= render 'shared/infomodal', id: "individuals-modal", message: "This table shows the individual sustainability scores for all employees. You can find their detailed individual sustainability reports by clicking on any employee's name." %>

<% content_for :javascript do %>

<script type="text/javascript" src="https://cdn.datatables.net/v/bs/jq-2.2.3/dt-1.10.12/datatables.min.js"></script>
<script>
  $(document).ready(function(){
    $('#employeestable').DataTable();
  });
</script>

<% end %>
